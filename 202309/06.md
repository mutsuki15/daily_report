# 2023/9/6 日報
## 取り組んだ課題一覧
- 達人に学ぶDB設計 第7章、第8章

## わかったこと
- スカラ値の基準として、意味的に分割できる限りなるべく分割して保持するのが良い
- テーブルの列は変数ではないので、一度意味を決めたら変更はできない
- テーブルにポリモルフィズムの性質はいらない
- パーティション
  テーブルを分割することなく、パーティションキーを軸として物理的に格納領域を分離することができる機能
- データマート(マート)
  頻繁に参照される列だけを持ったテーブル(オリジナルのテーブルと比べて小規模なテーブル)のこと。
- 可変長文字列は不変性がないためキーに不向き。固定長文字列が望ましい
- システムの統廃合で同じ役割を持つはずのテーブルが二つ存在するケースが発生することがある
- 代理キーを使わず自然キーを主キーとする方式
  - タイムスタンプ方式
    年度などいつの時点のデータであるかを示す方式。利点はデータの形式が単純なので、利用する際も、SQLの条件が簡単になる。欠点は、１つのスナップショットに含まれるデータをフルセットで保持する必要があるため、レコード数が増える
  - インターバル方式
    時点ではなく期間でデータの有効期間を示す方式。利点はレコード数を少なくできる。欠点は、データを利用する際に、SQLで範囲指定の条件を入れる必要がある。
  - 代理キーを使う場合、オートナンバリング方式を使う。オートナンバリングの実現方法は以下の２種類。
    - シーケンスオブジェクト
      SELECT文でアクセスすることで一意な連番を払い出すオブジェクト
    - ID列
      一意な連番を洗い出すデータ型
  - シーケンスとID列では、シーケンスの方が柔軟で拡張性に富む。
  - 基底テーブル
    ビューを定義したオリジナルのテーブルのこと
  - ビューは原則１段に留める。多段ビューはパフォーマンスが悪い。
  - データクレンジング
    データベースを構築するにあたり、それまでの業務で利用されていたデータをデータベースに登録できる状態にすること
  - 一意キーの存在しないデータはバッドノウハウを生み出す。
 
## 次やること
- 達人に学ぶDB設計 第9章

## 感じたこと
- やってはいけないバッドノウハウと注意すべきグレーノウハウを実際の現場で見つけたときに違和感を感じ、指摘ができるようになりたい。
  
## 学習時間
- 今日：3h
- 累計：418h
